"""test_spill

Revision ID: 3df16e9b591b
Revises: c38b9d85915e
Create Date: 2023-01-05 11:15:59.521772

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '3df16e9b591b'
down_revision = 'c38b9d85915e'
branch_labels = None
depends_on = None


def upgrade() -> None:
    op.execute(
        """
        update test_run 
        set name = 'test_spilling[uncompressible-release]',
        path = 'benchmarks/test_spill.py'
        where name == 'test_spilling[False]'
        and python_version like '3.9%';
        """
    )
    op.execute(
        """
        update test_run 
        set name = 'test_spilling[uncompressible-keep]',
        path = 'benchmarks/test_spill.py'
        where name == 'test_spilling[True]'
        and python_version like '3.9%';
        """
    )
    op.execute(
        """
        delete from test_run
        where originalname = 'test_spilling'
        and python_version not like '3.9%';
        """
    )
    op.execute(
        """
        delete from test_run
        where originalname = 'test_tensordot_stress';
        """
    )


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    pass
    # ### end Alembic commands ###
